# ============================================================================
# Claude Bridge Environment Variables
# ============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# ----------------------------------------------------------------------------
# Anthropic API (Required in production, optional in local dev)
# ----------------------------------------------------------------------------
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...
# Alternative name (legacy, use ANTHROPIC_API_KEY instead)
# ANTH_API_SECRET=sk-ant-...

# ----------------------------------------------------------------------------
# Supabase Configuration (Required)
# ----------------------------------------------------------------------------
# Server-side Supabase configuration (never exposed to client)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=eyJ...
# Optional: Only needed for admin operations (e.g., user management)
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# Client-side Supabase configuration (exposed to browser)
# MUST be prefixed with NEXT_PUBLIC_
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...

# Optional: For database type generation
# SUPABASE_ACCESS_TOKEN=sbp_...
# SUPABASE_PROJECT_ID=your-project-id

# ----------------------------------------------------------------------------
# JWT Configuration (Required in production)
# ----------------------------------------------------------------------------
# HS256 (Symmetric) - Simpler, single secret
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-here

# OR ES256 (Asymmetric) - More secure, uses public/private key pair
# Uncomment and provide JWK if using ES256:
# JWT_ALGORITHM=ES256
# JWT_ES256_PRIVATE_KEY={"kty":"EC","crv":"P-256",...}

# ----------------------------------------------------------------------------
# Bridge Configuration (Optional)
# ----------------------------------------------------------------------------
# Environment mode: local | dev | staging | production
# In local mode, API keys are optional and mock values are used
STREAM_ENV=local

# Base directory for site workspaces
# WORKSPACE_BASE=/srv/webalive/sites

# Optional passcode for bridge access
# ALIVE_PASSCODE=your-passcode

# Local development: Path to site template
# LOCAL_TEMPLATE_PATH=/path/to/your/template

# ----------------------------------------------------------------------------
# Claude Model Configuration (Optional)
# ----------------------------------------------------------------------------
# Which Claude model to use (default: claude-sonnet-4-5-20250929)
# CLAUDE_MODEL=claude-sonnet-4-5-20250929

# Note: CLAUDE_MAX_TURNS is set in @webalive/shared (DEFAULTS.CLAUDE_MAX_TURNS)

# ----------------------------------------------------------------------------
# Optional Integrations
# ----------------------------------------------------------------------------
# Groq API (alternative LLM provider)
# GROQ_API_SECRET=gsk_...

# GitHub Webhooks (for automated deployments)
# GITHUB_WEBHOOK_SECRET=your-webhook-secret

# Deployment configuration
# DEPLOY_BRANCH=main

# Flowglad (billing/payment integration)
# FLOWGLAD_SECRET_KEY=sk_test_...

# ----------------------------------------------------------------------------
# Image Storage (Optional)
# ----------------------------------------------------------------------------
# Secret for image signature validation
# IMAGES_SIGNATURE_SECRET=your-signature-secret

# Path for image storage
# IMAGES_STORAGE_PATH=/srv/webalive/storage

# ----------------------------------------------------------------------------
# Internal Tools (Optional)
# ----------------------------------------------------------------------------
# Secret for authenticating internal tool API calls
# INTERNAL_TOOLS_SECRET=your-internal-secret

# ----------------------------------------------------------------------------
# Redis Configuration (Required in production, optional in local dev)
# ----------------------------------------------------------------------------
# Redis connection URL for session storage and distributed locks
# - Production/Staging: REQUIRED (validated by getRedisUrl())
# - Local dev (STREAM_ENV=local): Optional, falls back to dev password
REDIS_URL=redis://:your-password@127.0.0.1:6379

# ----------------------------------------------------------------------------
# Domain Configuration (Optional)
# ----------------------------------------------------------------------------
# Wildcard TLD for subdomains
# WILDCARD_TLD=alive.best

# ----------------------------------------------------------------------------
# Server Identity (Required in production)
# ----------------------------------------------------------------------------
# Server IP address for DNS verification
# SERVER_IP=203.0.113.1

# ----------------------------------------------------------------------------
# Admin Configuration (Optional)
# ----------------------------------------------------------------------------
# Comma-separated list of admin emails (can select any model, toggle flags)
# ADMIN_EMAILS=admin@example.com,another@example.com

# Comma-separated list of superadmin emails (can edit Bridge repo itself)
# SUPERADMIN_EMAILS=superadmin@example.com

# ----------------------------------------------------------------------------
# Testing & Development (Optional)
# ----------------------------------------------------------------------------
# Skip environment variable validation (for CI/Docker builds)
# SKIP_ENV_VALIDATION=true

# Test environment identifier
# TEST_ENV=staging

# Test worker port base (for E2E parallel testing)
# TEST_WORKER_PORT_BASE=9100

# Playwright test mode
# PLAYWRIGHT_TEST=true

# Node environment (automatically set by framework)
# NODE_ENV=development

# ----------------------------------------------------------------------------
# Notes
# ----------------------------------------------------------------------------
# 1. Required variables: ANTHROPIC_API_KEY (unless STREAM_ENV=local),
#    SUPABASE_URL, SUPABASE_ANON_KEY, NEXT_PUBLIC_SUPABASE_URL,
#    NEXT_PUBLIC_SUPABASE_ANON_KEY, JWT_SECRET (in production)
#
# 2. For local development without API keys:
#    Set STREAM_ENV=local to bypass API key requirements
#
# 3. Security:
#    - Never commit .env.local to git
#    - Use strong, randomly generated secrets in production
#    - Rotate JWT_SECRET periodically
#    - Keep SUPABASE_SERVICE_ROLE_KEY secure (full database access)
#
# 4. Turborepo caching:
#    Changing any of these variables will invalidate the build cache
#    (configured in turbo.json)
